(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[428],{8328:function(e,s,t){Promise.resolve().then(t.bind(t,7690))},7690:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(7437),n=t(2265),r=t(7648),i=t(5846),o=t(2660),l=t(5302),d=t(6858),c=t(3240),u=t(2119);function p(){let[e,s]=(0,n.useState)(0),[t,p]=(0,n.useState)([]);(0,n.useEffect)(()=>{(0,u.xC)(),p(h.map((e,s)=>(0,u.qM)(e.id)?s:-1).filter(e=>-1!==e))},[]);let h=[{id:"database-introduction",title:"Understanding Databases",type:"explanation",content:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Chapter 6: Database Integration"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Excellent! You've built a working API, but the data still disappears when the server restarts. Real applications need persistent, reliable data storage. Let's integrate a database."}),(0,a.jsxs)("div",{className:"explanation-box",children:[(0,a.jsx)("div",{className:"explanation-title",children:"What is a Database?"}),(0,a.jsxs)("div",{className:"explanation-text",children:[(0,a.jsx)("p",{className:"mb-3",children:"A database is like a digital filing cabinet that stores, organizes, and retrieves information efficiently. Unlike files or arrays in memory, databases are designed for reliability, speed, and concurrent access by multiple users."}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-2",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Persistence:"})," Data survives server restarts and system failures"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Concurrency:"})," Multiple users can access data simultaneously"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"ACID Properties:"})," Atomicity, Consistency, Isolation, Durability"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Query Language:"})," Structured ways to find and manipulate data"]})]})]})]}),(0,a.jsx)("div",{className:"ministry-header",children:(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Why the Ministry Needs a Database"})}),(0,a.jsxs)("div",{className:"ministry-content",children:[(0,a.jsx)("p",{className:"mb-4",children:"Government systems require enterprise-grade data management with audit trails, backup procedures, and regulatory compliance:"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[(0,a.jsx)("h4",{className:"font-medium text-red-900 mb-2",children:"Current Issues"}),(0,a.jsxs)("ul",{className:"text-sm text-red-800 space-y-1",children:[(0,a.jsx)("li",{children:"• Data lost on server restart"}),(0,a.jsx)("li",{children:"• No data backup or recovery"}),(0,a.jsx)("li",{children:"• No audit trail for changes"}),(0,a.jsx)("li",{children:"• Cannot handle multiple users safely"})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,a.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"Database Benefits"}),(0,a.jsxs)("ul",{className:"text-sm text-green-800 space-y-1",children:[(0,a.jsx)("li",{children:"• Permanent data storage"}),(0,a.jsx)("li",{children:"• Automated backup and recovery"}),(0,a.jsx)("li",{children:"• Transaction logging and audit trails"}),(0,a.jsx)("li",{children:"• Safe concurrent access"})]})]})]})]}),(0,a.jsxs)("div",{className:"concept-callout",children:[(0,a.jsxs)("div",{className:"concept-title",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5 mr-2"}),"BA Insight: Data Architecture"]}),(0,a.jsx)("p",{className:"concept-text",children:'When you write requirements about "data retention," "audit trails," or "system reliability," you\'re defining database needs. Understanding concepts like transactions, schemas, and queries helps you write more precise data requirements and have informed discussions about system architecture and compliance needs.'})]}),(0,a.jsxs)("div",{className:"bg-tutorial-primary text-white p-6 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-3",children:"\uD83C\uDFAF Learning Objective"}),(0,a.jsx)("p",{children:"In this chapter, you'll integrate SQLite database with your API, learn about database schemas, and understand how enterprise data management works. You'll see how business requirements translate into database design decisions."})]})]})},{id:"setup-database",title:"Step 1: Setting Up SQLite Database",type:"coding",exercise:{title:"Add Database Configuration",description:"We'll add SQLite database integration to our API server, replacing the in-memory array with persistent storage.",instructions:["Install and configure SQLite database package","Create a database initialization function","Set up the tasks table with appropriate columns","Add database connection to the server startup"],language:"javascript",codeBlock:{code:'const sqlite3 = require(\'sqlite3\').verbose();\nconst path = require(\'path\');\n\n// Database setup\nconst dbPath = path.join(__dirname, \'ministry_tasks.db\');\nconst db = new sqlite3.Database(dbPath);\n\n// Initialize database\nfunction initializeDatabase() {\n  return new Promise((resolve, reject) => {\n    db.serialize(() => {\n      // Create tasks table\n      db.run(`\n        CREATE TABLE IF NOT EXISTS tasks (\n          id INTEGER PRIMARY KEY AUTOINCREMENT,\n          title TEXT NOT NULL,\n          description TEXT,\n          assignedTo TEXT,\n          completed BOOLEAN DEFAULT 0,\n          createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n          updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP\n        )\n      `, (err) => {\n        if (err) {\n          reject(err);\n        } else {\n          // Insert sample data if table is empty\n          db.get("SELECT COUNT(*) as count FROM tasks", (err, row) => {\n            if (err) {\n              reject(err);\n            } else if (row.count === 0) {\n              db.run(`\n                INSERT INTO tasks (title, description, assignedTo) \n                VALUES (?, ?, ?)\n              `, [\n                "Evaluate Mr. Smith\'s Silly Walk Application",\n                "Review submitted video and assess walk silliness level.",\n                "John Cleese"\n              ], (err) => {\n                if (err) reject(err);\n                else resolve();\n              });\n            } else {\n              resolve();\n            }\n          });\n        }\n      });\n    });\n  });\n}',explanations:[{line:"const sqlite3 = require('sqlite3').verbose();",explanation:"Import SQLite database library for Node.js with verbose error reporting enabled.",businessContext:"SQLite is perfect for learning and small applications - it's a file-based database that doesn't require a separate server."},{line:"const db = new sqlite3.Database(dbPath);",explanation:"Create a database connection to a file called 'ministry_tasks.db' in the current directory.",businessContext:"This creates a persistent database file that will survive server restarts, solving the data loss problem."},{line:"CREATE TABLE IF NOT EXISTS tasks (...)",explanation:"Define the structure of the tasks table with columns for all our task properties.",businessContext:"This creates the data schema - the blueprint for how task information is organized and stored."},{line:"id INTEGER PRIMARY KEY AUTOINCREMENT",explanation:"Create an auto-incrementing ID column that uniquely identifies each task.",businessContext:"Every task gets a unique identifier automatically, enabling precise tracking and updates."},{line:"createdAt DATETIME DEFAULT CURRENT_TIMESTAMP",explanation:"Automatically record when each task was created, providing an audit trail.",businessContext:"This implements the requirement for 'audit trails' - tracking when tasks were added to the system."}]},startingCode:"const express = require('express');\nconst cors = require('cors');\n// Step 1: Add database imports here\n// const sqlite3 = require('sqlite3').verbose();\n// const path = require('path');\n\nconst app = express();\nconst PORT = 3000;\n\n// Middleware\napp.use(cors());\napp.use(express.json());\n\n// Step 1: Add database setup here\n// const dbPath = path.join(__dirname, 'ministry_tasks.db');\n// const db = new sqlite3.Database(dbPath);\n\n// In-memory task storage (to be replaced)\nlet tasks = [\n  {\n    id: 1,\n    title: \"Evaluate Mr. Smith's Silly Walk Application\",\n    description: \"Review submitted video and assess walk silliness level.\",\n    assignedTo: \"John Cleese\",\n    completed: false\n  }\n];\n\n// Step 1: Add database initialization function here\n\n// Routes (to be updated in next steps)\napp.get('/', (req, res) => {\n  res.json({ \n    message: 'Ministry of Silly Walks Task Management API',\n    version: '1.0.0 - Now with Database!',\n    database: 'SQLite'\n  });\n});\n\n// Start server\n// Step 1: Add database initialization before starting server\napp.listen(PORT, () => {\n  console.log(`Server running on http://localhost:${PORT}`);\n});",targetCode:"const express = require('express');\nconst cors = require('cors');\nconst sqlite3 = require('sqlite3').verbose();\nconst path = require('path');\n\nconst app = express();\nconst PORT = 3000;\n\n// Middleware\napp.use(cors());\napp.use(express.json());\n\n// Database setup\nconst dbPath = path.join(__dirname, 'ministry_tasks.db');\nconst db = new sqlite3.Database(dbPath);\n\n// Initialize database\nfunction initializeDatabase() {\n  return new Promise((resolve, reject) => {\n    db.serialize(() => {\n      // Create tasks table\n      db.run(`\n        CREATE TABLE IF NOT EXISTS tasks (\n          id INTEGER PRIMARY KEY AUTOINCREMENT,\n          title TEXT NOT NULL,\n          description TEXT,\n          assignedTo TEXT,\n          completed BOOLEAN DEFAULT 0,\n          createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n          updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP\n        )\n      `, (err) => {\n        if (err) {\n          reject(err);\n        } else {\n          // Insert sample data if table is empty\n          db.get(\"SELECT COUNT(*) as count FROM tasks\", (err, row) => {\n            if (err) {\n              reject(err);\n            } else if (row.count === 0) {\n              db.run(`\n                INSERT INTO tasks (title, description, assignedTo) \n                VALUES (?, ?, ?)\n              `, [\n                \"Evaluate Mr. Smith's Silly Walk Application\",\n                \"Review submitted video and assess walk silliness level.\",\n                \"John Cleese\"\n              ], (err) => {\n                if (err) reject(err);\n                else resolve();\n              });\n            } else {\n              resolve();\n            }\n          });\n        }\n      });\n    });\n  });\n}\n\n// Routes\napp.get('/', (req, res) => {\n  res.json({ \n    message: 'Ministry of Silly Walks Task Management API',\n    version: '1.0.0 - Now with Database!',\n    database: 'SQLite'\n  });\n});\n\n// Start server with database initialization\nasync function startServer() {\n  try {\n    await initializeDatabase();\n    console.log('Database initialized successfully');\n    \n    app.listen(PORT, () => {\n      console.log(`Server running on http://localhost:${PORT}`);\n      console.log('Database file: ministry_tasks.db');\n    });\n  } catch (error) {\n    console.error('Failed to initialize database:', error);\n    process.exit(1);\n  }\n}\n\nstartServer();",hints:["Add the SQLite imports at the top after the existing imports","Create the database connection using the file path","The initializeDatabase function should create the table and add sample data","Use async/await pattern to ensure database is ready before starting server","The table schema should include id, title, description, assignedTo, completed, and timestamp columns"],explanation:{whatIsHappening:"You've replaced the temporary in-memory array with a persistent SQLite database! The server now creates a database file, defines a proper table schema with audit timestamps, and initializes sample data. The database connection is established before the server starts accepting requests.",whyItMatters:"This solves the fundamental problem of data persistence. Tasks now survive server restarts, and the audit trail timestamps meet compliance requirements. The database schema enforces data consistency and provides a foundation for more advanced features like user management and reporting.",realWorldConnection:"This mirrors how real enterprise applications handle data - with persistent storage, proper schemas, and initialization procedures. When you write requirements about 'data retention' or 'audit compliance,' this is the type of infrastructure that enables those capabilities. Understanding database integration helps you write more informed requirements about data management and system reliability.",keyTerms:{"Database schema":"The structure and organization of data tables and columns","Primary key":"A unique identifier for each row in a database table",AUTOINCREMENT:"Automatically generates unique sequential numbers for new records","Audit trail":"Automatic recording of when data was created or modified"}}}},{id:"convert-api-endpoints",title:"Step 2: Converting API to Use Database",type:"coding",exercise:{title:"Update CRUD Endpoints for Database",description:"Now let's update all our API endpoints to use the database instead of the in-memory array.",instructions:["Update GET /tasks to query the database","Update POST /tasks to insert into database","Update PUT /tasks/:id to update database records","Update DELETE /tasks/:id to remove from database"],language:"javascript",startingCode:"// Previous database setup code...\n\n// GET all tasks - UPDATE TO USE DATABASE\napp.get('/tasks', (req, res) => {\n  // Replace this with database query\n  res.json({\n    success: true,\n    data: [], // This should come from database\n    count: 0\n  });\n});\n\n// POST new task - UPDATE TO USE DATABASE  \napp.post('/tasks', (req, res) => {\n  const { title, description, assignedTo } = req.body;\n  \n  if (!title) {\n    return res.status(400).json({\n      success: false,\n      error: 'Title is required'\n    });\n  }\n  \n  // Replace this with database insert\n  res.status(201).json({\n    success: true,\n    data: { message: 'Should insert into database' }\n  });\n});\n\n// PUT update task - UPDATE TO USE DATABASE\napp.put('/tasks/:id', (req, res) => {\n  const taskId = parseInt(req.params.id);\n  \n  // Replace this with database update\n  res.json({\n    success: true,\n    data: { message: 'Should update in database' }\n  });\n});\n\n// DELETE task - UPDATE TO USE DATABASE\napp.delete('/tasks/:id', (req, res) => {\n  const taskId = parseInt(req.params.id);\n  \n  // Replace this with database delete\n  res.json({\n    success: true,\n    data: { message: 'Should delete from database' }\n  });\n});",targetCode:"// GET all tasks\napp.get('/tasks', (req, res) => {\n  db.all(\"SELECT * FROM tasks ORDER BY createdAt DESC\", (err, rows) => {\n    if (err) {\n      return res.status(500).json({\n        success: false,\n        error: 'Database error'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: rows,\n      count: rows.length\n    });\n  });\n});\n\n// POST new task\napp.post('/tasks', (req, res) => {\n  const { title, description, assignedTo } = req.body;\n  \n  if (!title) {\n    return res.status(400).json({\n      success: false,\n      error: 'Title is required'\n    });\n  }\n  \n  db.run(`\n    INSERT INTO tasks (title, description, assignedTo) \n    VALUES (?, ?, ?)\n  `, [title, description || 'Status: Pending', assignedTo || 'Current User'], function(err) {\n    if (err) {\n      return res.status(500).json({\n        success: false,\n        error: 'Database error'\n      });\n    }\n    \n    // Get the inserted task\n    db.get(\"SELECT * FROM tasks WHERE id = ?\", [this.lastID], (err, row) => {\n      if (err) {\n        return res.status(500).json({\n          success: false,\n          error: 'Database error'\n        });\n      }\n      \n      res.status(201).json({\n        success: true,\n        data: row\n      });\n    });\n  });\n});\n\n// PUT update task\napp.put('/tasks/:id', (req, res) => {\n  const taskId = parseInt(req.params.id);\n  const updates = req.body;\n  \n  // Build dynamic update query\n  const fields = Object.keys(updates).map(key => `${key} = ?`).join(', ');\n  const values = Object.values(updates);\n  values.push(taskId);\n  \n  db.run(`\n    UPDATE tasks \n    SET ${fields}, updatedAt = CURRENT_TIMESTAMP \n    WHERE id = ?\n  `, values, function(err) {\n    if (err) {\n      return res.status(500).json({\n        success: false,\n        error: 'Database error'\n      });\n    }\n    \n    if (this.changes === 0) {\n      return res.status(404).json({\n        success: false,\n        error: 'Task not found'\n      });\n    }\n    \n    // Get the updated task\n    db.get(\"SELECT * FROM tasks WHERE id = ?\", [taskId], (err, row) => {\n      if (err) {\n        return res.status(500).json({\n          success: false,\n          error: 'Database error'\n        });\n      }\n      \n      res.json({\n        success: true,\n        data: row\n      });\n    });\n  });\n});\n\n// DELETE task\napp.delete('/tasks/:id', (req, res) => {\n  const taskId = parseInt(req.params.id);\n  \n  // Get task before deleting for confirmation\n  db.get(\"SELECT * FROM tasks WHERE id = ?\", [taskId], (err, row) => {\n    if (err) {\n      return res.status(500).json({\n        success: false,\n        error: 'Database error'\n      });\n    }\n    \n    if (!row) {\n      return res.status(404).json({\n        success: false,\n        error: 'Task not found'\n      });\n    }\n    \n    db.run(\"DELETE FROM tasks WHERE id = ?\", [taskId], function(err) {\n      if (err) {\n        return res.status(500).json({\n          success: false,\n          error: 'Database error'\n        });\n      }\n      \n      res.json({\n        success: true,\n        data: row\n      });\n    });\n  });\n});",hints:["Use db.all() for SELECT queries that return multiple rows","Use db.run() for INSERT, UPDATE, and DELETE operations","Use db.get() for SELECT queries that return a single row","Always handle database errors with proper HTTP status codes","Use parameterized queries (?) to prevent SQL injection"],explanation:{whatIsHappening:"You've converted your entire API to use persistent database storage! Each endpoint now uses proper SQL queries with parameterized statements for security. The database handles all data operations while maintaining the same API interface that frontends expect.",whyItMatters:"This completes the transition to enterprise-grade data management. The API now provides true persistence, concurrent access safety, and automatic audit trails. Error handling ensures reliable operation, and parameterized queries prevent security vulnerabilities.",realWorldConnection:"This demonstrates how business requirements translate into technical implementation - 'data must persist' becomes database integration, 'audit trails' become timestamp columns, and 'system reliability' becomes proper error handling. Understanding database operations helps you write more precise requirements about data management and system behavior.",keyTerms:{"SQL queries":"Structured Query Language commands for database operations","Parameterized queries":"Using placeholders (?) to safely insert user data into SQL","Database transactions":"Operations that either complete fully or not at all","Error handling":"Graceful management of database and system failures"}}}}],m=e=>{t.includes(e)||(p([...t,e]),(0,u.jq)(h[e].id))},b=t.length===h.length;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(r.default,{href:"/tutorial/chapter-5",className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 mr-2"}),"Back to Chapter 5"]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Chapter 6: Database Integration"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Adding persistent storage with SQLite"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Step ",e+1," of ",h.length]})]})})}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-4 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"tutorial-card sticky top-8",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Chapter 6 Progress"}),(0,a.jsx)("div",{className:"space-y-3",children:h.map((n,r)=>(0,a.jsx)("button",{onClick:()=>s(r),className:"w-full text-left p-3 rounded-lg transition-colors ".concat(e===r?"bg-tutorial-primary text-white":t.includes(r)?"bg-green-50 text-green-800 border border-green-200":"bg-gray-50 text-gray-700 hover:bg-gray-100"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[t.includes(r)?(0,a.jsx)(l.Z,{className:"w-5 h-5 mr-3 text-green-600"}):(0,a.jsx)("div",{className:"w-5 h-5 mr-3 rounded-full border-2 ".concat(e===r?"border-white":"border-gray-300")}),(0,a.jsx)("span",{className:"text-sm font-medium",children:n.title})]})},n.id))}),b&&(0,a.jsxs)("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Chapter 6 Complete!"}),(0,a.jsxs)(r.default,{href:"/tutorial/chapter-7",className:"inline-flex items-center text-sm text-green-700 hover:text-green-900",children:["Start Chapter 7",(0,a.jsx)(d.Z,{className:"w-4 h-4 ml-1"})]})]})]})}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Chapter Progress"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[t.length," / ",h.length," completed"]})]}),(0,a.jsx)("div",{className:"progress-bar",children:(0,a.jsx)("div",{className:"progress-fill",style:{width:"".concat(t.length/h.length*100,"%")}})})]}),"explanation"===h[e].type?(0,a.jsxs)("div",{className:"tutorial-card",children:[h[e].content,(0,a.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200 mt-8",children:[(0,a.jsxs)("button",{onClick:()=>s(Math.max(0,e-1)),disabled:0===e,className:"flex items-center ".concat(0===e?"text-gray-400 cursor-not-allowed":"text-tutorial-primary hover:text-blue-700"),children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Previous"]}),(0,a.jsxs)("button",{onClick:()=>{m(e),e<h.length-1&&s(e+1)},className:"tutorial-button-primary",children:[t.includes(e)?e===h.length-1?"Complete Chapter":"Next Step":"Add Database!",(0,a.jsx)(d.Z,{className:"w-4 h-4 ml-2"})]})]})]}):(0,a.jsx)(c.Z,{...h[e].exercise,stepId:h[e].id,onComplete:()=>{m(e),setTimeout(()=>{e<h.length-1&&s(e+1)},2e3)}})]})})]})})]})}}},function(e){e.O(0,[451,862,971,117,744],function(){return e(e.s=8328)}),_N_E=e.O()}]);